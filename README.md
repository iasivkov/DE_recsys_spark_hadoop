# Проект 7-го спринта

### Описание
Репозиторий предназначен для сдачи проекта 7-го спринта

### Как работать с репозиторием
1. В вашем GitHub-аккаунте автоматически создастся репозиторий `de-project-sprint-7` после того, как вы привяжете свой GitHub-аккаунт на Платформе.
2. Скопируйте репозиторий на свой компьютер. В качестве пароля укажите ваш `Access Token`, который нужно получить на странице [Personal Access Tokens](https://github.com/settings/tokens)):
	* `git clone https://github.com/{{ username }}/de-project-sprint-7.git`
3. Перейдите в директорию с проектом: 
	* `cd de-project-sprint-7`
4. Выполните проект и сохраните получившийся код в локальном репозитории:
	* `git add .`
	* `git commit -m 'my best commit'`
5. Обновите репозиторий в вашем GutHub-аккаунте:
	* `git push origin main`

### Структура репозитория
Вложенные файлы в репозиторий будут использоваться для проверки и предоставления обратной связи по проекту. Поэтому постарайтесь публиковать ваше решение согласно установленной структуре — так будет проще соотнести задания с решениями.

Внутри `src` расположены две папки:
- `/src/dags`;
- `/src/sql`.
### Порядок запуска дагов
- сначала запускаем first_dag_sprint7_city_dag
- потом остальные два в любом порядке

### Структура HDFS хранилища
- В папке /user/iasivkov/data/geo лежит parquet-файл events, содержит информацию о событиях с координатами
(stage слой, обновляется с некоторой периодичностью) 
- В папке /user/iasivkov/snapshots/geo лежит parquet-файл geo_t, таблица с координатами городов
- В папке /user/iasivkov/data/dds с помощью first_dag_sprint7_city_dag создаётся parquet-файл events_city, содержит информацию о событиях и городе
(dds-слой, обновляется раз в день)
- В папке /user/iasivkov/data/analytics лежат parquet-файлы dm_region, dm_user, dm_rec_sys  
с витринами по регионам, пользователям и рекомендациям друзей, создаются первые два с помощью sprint7_user_dag и последний — sprint7_region_dag
(первые два обновляются раз в день: в 9:00 и 12:00 соответственно и последний раз в неделю, в понедельник в 00:00)